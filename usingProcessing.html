<!DOCTYPE html>
<html> 
 <head>
    <title>Processing.JS inside Webpages: Template</title> 
</head>
 <body>
    <p align="center"> 
      <canvas id="mycanvas"></canvas> 
    </p>
 </body>
 
 <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
 
 <script>
    var sketchProc = function(processingInstance) {
     with (processingInstance) {
        size(800, 650); 
        frameRate(30);

        //VARIABLES
        //variables for stars
        let sizeXStar = 0.0010;
        let sizeYStar = 0.0010;
        let isMidnight = false;

        //Variable for the Sun
        let sunMovement = 380;

        //Variables for the moon
        let moveMoonX = 850;
        let moveMoonY = 200;
        let moonPhase = 1;

        //Variables for Characters
        let positionXCharacter = 740;
        let positionYCharacter = 45;
        
        //Variable Color of sky
        let colorOfSky = [0, 228, 255];
        
        
        //ARRAYS
        //Array with random positions for characters
        let arrayOfPositionsCharacters = [];
        for (let i = 0; i < 10; i++) {
          let randomXForCharacters = random(0, 740);
          let randomYForCharacters = random(0, 45);
          let randomSpeedForCharacters = random(1, 10);
          arrayOfPositionsCharacters.push([randomXForCharacters, randomYForCharacters, randomSpeedForCharacters]);
        }
 
        //Arrays to define color of buildings
        let colorsForBuildings = [180, 220, 220]
        
        //Array of arrays of random mumbers to make buildings
        let arrayOfRandomNumbers = []
        for (let i = 0; i < 60; i++) {
          let randomX = random(-40, 800);
          let randomWeigth = random(30, 50);
          let randomHeight = random(-200, -100);
          arrayOfRandomNumbers.push([randomX, randomWeigth, randomHeight]);
        }
        
        //Array with position of random stars
        let arrayOfStars = [];
        for (let i = 0; i < 50; i++) {
          let randomXStars = random(0, 800);
          let randomYStars = random(0, 400);
          arrayOfStars.push([randomXStars, randomYStars]); 
        }

        
        //OBJECTS
        //Objects with colors for painted ladies
        let colorsForPaintedLadiesNight = {
          0: [255, 0, 0],
          1: [255, 133, 0],
          2: [255, 255, 0],
          3: [0, 255, 0],
          4: [0, 0, 255],
          5: [133, 0, 255]
        }

        let colorsForPaintedLadiesDay = {
          0: [227, 221, 153],
          1: [183, 193, 159],
          2: [251, 255, 108],
          3: [108, 201, 231],
          4: [84, 89, 255],
          5: [242, 172, 97]
        }
        
        //Object of clouds information
        let objectOfCloudsInformation = {};
        for (let i = 1; i < 7; i++) {
          let randomXForClouds = random(0, 800);
          let randomSpeedForClouds = random(1, 5);
          objectOfCloudsInformation[i] = [((50 * i) - 50), randomSpeedForClouds, randomXForClouds];          
        }

        //FUNCTIONS
        //Sky
        let sky = function () {
          background(colorOfSky[0], colorOfSky[1], colorOfSky[2]);
          if (sunMovement < -400 && colorOfSky[2] > 0) {
            if (colorOfSky[1] > 0) {
              colorOfSky[1] -= 5;
            } else {
              colorOfSky[1] = 0;
              if (colorOfSky[2] <= 40) {
                colorOfSky[2] = 40;
              } else {
                colorOfSky[2] -= 5;
              }
            }
          } else if (sunMovement > -200 && colorOfSky[1] < 228) {
            if (colorOfSky[2] < 255) {
              colorOfSky[2] += 4;
            } else {
              colorOfSky[1] += 4;
            }
          }
        }  

        //Sun
        let sun = function () {
          fill(255, 255, 0);
          noStroke();
          ellipse(200, sunMovement, 200, 200);
          noFill();
          stroke(0, 0, 0);
          strokeWeight(3);
          arc(200, sunMovement, 150, 100, 0, PI);
          fill(0, 0, 0);
          ellipse(250, sunMovement, 10, 10);
          ellipse(153, sunMovement, 10, 10);
          sunMovement -= 5;
          
          if (colorOfSky[2] <= 60 && sunMovement === -1300) {
            sunMovement = 750;
          }
        }

        //Moon
        let moon = function () {
          if (colorOfSky[2] <= 160) {
            noStroke();
            fill(255, 255, 255);
            ellipse(moveMoonX, moveMoonY, 50, 50);

            if (moonPhase === 1) {
              fill(colorOfSky[0], colorOfSky[1], colorOfSky[2]);
              ellipse(moveMoonX - 10, moveMoonY, 50, 50);
            } else if (moonPhase === 2) {
              fill(colorOfSky[0], colorOfSky[1], colorOfSky[2]);
              rect(moveMoonX - 50, moveMoonY - 30, 50, 70);
            } else if (moonPhase > 3) {
              moonPhase = 1
            }
            moveMoonX -= 2;
            moveMoonY -= 2;
          } else {
            moveMoonX = 850;
            moveMoonY = 200;
          }
          if (colorOfSky[2] === 161) {
            moonPhase += 1;
          }
        }

        //Stars
        let stars = function () {
          for (var i = 0; i < arrayOfStars.length; i++) {
            
            if (colorOfSky[2] < 255) {
              
              fill(255, 255, 255);
              noStroke();
              ellipse(arrayOfStars[i][0], arrayOfStars[i][1], sizeXStar, sizeYStar);
              
              if (isMidnight) {
                sizeXStar -= 0.0010;
                sizeYStar -= 0.0010;
              } else {
                sizeXStar += 0.0010;
                sizeYStar += 0.0010;
              }
              
              if (sizeXStar > 4) {
                sizeXStar -= 0.0010;
                sizeYStar -= 0.0010;
                isMidnight = true;
              } 

              if (colorOfSky[2] > 250) {
                sizeXStar = 0.0010;
                sizeYStar = 0.0010;
                isMidnight = false;
              }
            } 
          }
        }

        //Transamerica Pyramid
        let pyramid = function () {
          stroke(0, 0, 0);
          let randomColor1Pyramid = random(0, 255);
          let randomColor2Pyramid = random(0, 255);
          let randomColor3Pyramid = random(0, 255);

          if (colorOfSky[2] < 255) {
            fill(randomColor1Pyramid, randomColor2Pyramid, randomColor3Pyramid);
          } else {
            fill(colorsForBuildings[0], colorsForBuildings[1], colorsForBuildings[2]);
          }

          triangle(100, 450, 150, 150, 200, 450);
          rect(140, 225, 20, 100);
        }

        //Salesforse Building
        let salesforce = function () {
          let randomColor1Salesforce = random(0, 255);
          let randomColor2Salesforce = random(0, 255);
          let randomColor3Salesforce = random(0, 255);

          if (colorOfSky[2] < 255) {
            fill(randomColor1Salesforce, randomColor2Salesforce, randomColor3Salesforce);
          } else {
            fill(colorsForBuildings[0], colorsForBuildings[1], colorsForBuildings[2]);
          }

          ellipse(520, 270, 50, 370);

          strokeWeight(3);
          line(505, 120, 534, 120);

          noStroke();
          fill(colorOfSky[0], colorOfSky[1], colorOfSky[2]);
          rect(500, 79, 40, 40);
        }

        //Clouds
        let clouds = function () {
          noStroke();
          fill(255, 255, 255);

          for (let key in objectOfCloudsInformation) {

            ellipse(objectOfCloudsInformation[key][2]     , objectOfCloudsInformation[key][0], 126, 97);
            ellipse(objectOfCloudsInformation[key][2] + 62, objectOfCloudsInformation[key][0], 70 , 60);
            ellipse(objectOfCloudsInformation[key][2] - 62, objectOfCloudsInformation[key][0], 70 , 60);
            
            if (key % 2 === 0) {
              if (objectOfCloudsInformation[key][2] > 1000) {
                objectOfCloudsInformation[key][2] = -200;
              } else {
                objectOfCloudsInformation[key][2] += objectOfCloudsInformation[key][1];
              }
            } else {
              if (objectOfCloudsInformation[key][2] < -100) {
                objectOfCloudsInformation[key][2] = 1000;
              } else {
                objectOfCloudsInformation[key][2] -= objectOfCloudsInformation[key][1];
              }
            }
          }
        }
        
        //Buildings of the city
        let buildings = function () {
          stroke(0, 0, 0);

          for (let j = 0; j < arrayOfRandomNumbers.length; j++) {
          
            let randomColor1Buildings = random(0, 255);
            let randomColor2Buildings = random(0, 255);
            let randomColor3Buildings = random(0, 255);

            if (colorOfSky[2] < 255) {
              fill(randomColor1Buildings, randomColor2Buildings, randomColor3Buildings);
            } else {
              fill(colorsForBuildings[0], colorsForBuildings[1], colorsForBuildings[2]);
            }

            rect(arrayOfRandomNumbers[j][0],
                                        400,
                 arrayOfRandomNumbers[j][1],
                 arrayOfRandomNumbers[j][2]
            );
          }
        }

        //Painted Ladies
        let paintedLadies = function () {
          fill(225, 204, 127);
          let moveToX = -10;
          let moveToY = -60;
            
          let newHouse = function (number) {

            for (let i = 0; i < number; i++) {            
              if (colorOfSky[2] < 255) {            
                fill(colorsForPaintedLadiesNight[i][0], colorsForPaintedLadiesNight[i][1], colorsForPaintedLadiesNight[i][2]);
              } else {
                fill(colorsForPaintedLadiesDay[i][0], colorsForPaintedLadiesDay[i][1], colorsForPaintedLadiesDay[i][2]);
              }

              rect(10 + moveToX, 450 + moveToY, 120, 180);
              triangle(5  + moveToX, 450 + moveToY,
                      70  + moveToX, 385 + moveToY,
                      135 + moveToX, 450 + moveToY
              );

              quad(130 + moveToX, 450 + moveToY,
                   130 + moveToX, 630 + moveToY,
                   265 + moveToX, 610 + moveToY,
                   265 + moveToX, 440 + moveToY
              );
              fill(40, 40, 40);
              quad(70 + moveToX, 385 + moveToY,
                  135 + moveToX, 450 + moveToY,
                  270 + moveToX, 440 + moveToY,
                  200 + moveToX, 380 + moveToY
              );

              moveToX += 130;
              moveToY -= 10;
            } 
            
          };
          newHouse(6);
        }
        
        //Crosswalk, street and grass
        let crosswalkStreetAndGrass = function () {
          //Crosswalk
          fill(80, 80, 80);
          quad(0, 650, 0, 570, 1000, 495, 650, 800);
          
          //Street
          fill(120, 120, 120);
          quad(0, 650, 0, 580, 1000, 505, 650, 800);
          
          //Upper Green field
          fill(0, 180, 0);
          quad(0, 650, 0, 570, 1000, 610, 650, 800);
          
          //Lower Green Field
          fill(0, 255, 0);
          rect(0, 620, 800, 30);
        }
        
        //Characters
          let characters = function () {
            for (let i = 0; i < arrayOfPositionsCharacters.length; i++) {
              noStroke();
              
              fill(0, 0, 0);
              ellipse(30 + arrayOfPositionsCharacters[i][0], 643 - arrayOfPositionsCharacters[i][1], 15, 10);
              
              fill(255, 60, 0);
              ellipse(30 + arrayOfPositionsCharacters[i][0], 633 - arrayOfPositionsCharacters[i][1], 30, 20);
              
              fill(218, 159, 74);
              ellipse(30 + arrayOfPositionsCharacters[i][0], 609 - arrayOfPositionsCharacters[i][1], 50, 40);
              
              stroke(0, 0, 0);
              strokeWeight(2)            
              arc(18  + arrayOfPositionsCharacters[i][0], 613 - arrayOfPositionsCharacters[i][1], 8 ,  10, -3,  0);
              arc(42  + arrayOfPositionsCharacters[i][0], 613 - arrayOfPositionsCharacters[i][1], 8 ,  10, -3,  0);
              fill(0, 0, 0);
              arc(30  + arrayOfPositionsCharacters[i][0], 620 - arrayOfPositionsCharacters[i][1], 12,  10,  0, PI);
              arc(30  + arrayOfPositionsCharacters[i][0], 605 - arrayOfPositionsCharacters[i][1], 55, -55,  0, PI);
            
              
              if (i % 2 === 0) {
                if (arrayOfPositionsCharacters[i][0] > 1000) {
                  arrayOfPositionsCharacters[i][0] = -200;
                } else {
                  arrayOfPositionsCharacters[i][0] += arrayOfPositionsCharacters[i][2];
                }
              } else {
                if (arrayOfPositionsCharacters[i][0] < -100) {
                  arrayOfPositionsCharacters[i][0] = 1000;
                } else {
                  arrayOfPositionsCharacters[i][0] -= arrayOfPositionsCharacters[i][2];
                }
              }
            }
          }
        


          //UFO
          let ufo = function () {
            let mouseXForUFO = mouseX;
            let mouseYForUFO = mouseY;
            var sizeOfUFO = mouseYForUFO * 0.006;
  
            if (mouseYForUFO > 230) {
              mouseYForUFO = 230;
              sizeOfUFO = 1.4;
            }
  
            fill(38, 25, 25);
            ellipse(mouseXForUFO, mouseYForUFO + (sizeOfUFO * 1) ,  70 * sizeOfUFO, 70 * sizeOfUFO);

            fill(112, 59, 112);
            ellipse(mouseXForUFO, mouseYForUFO + (sizeOfUFO * 15), 150 * sizeOfUFO, 50 * sizeOfUFO);

            fill(255, 255, 255);
            ellipse(mouseXForUFO, mouseYForUFO + (sizeOfUFO * 30),  70 * sizeOfUFO, 25 * sizeOfUFO);
          }
        
        draw = function () {
          sky();        
          sun();
          moon();
          stars();
          pyramid();
          salesforce();
          clouds();
          buildings();
          paintedLadies();
          crosswalkStreetAndGrass();          
          characters();  
          ufo();
        }
      }
    };

    var canvas = document.getElementById("mycanvas"); 
    var processingInstance = new Processing(canvas, sketchProc); 
 </script>

</html>